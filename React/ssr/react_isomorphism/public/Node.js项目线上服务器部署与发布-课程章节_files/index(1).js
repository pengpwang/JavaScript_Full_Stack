define("class/package/index",["require"],function(){function t(t){this.item=t.item||$(".combine-tab .box .item"),this.scrollWrap=t.scrollWrap||this.item,this.lBtn=t.lBtn||$(".js-left-package"),this.rBtn=t.rBtn||$(".js-right-package"),this.len=0,this.maxLen=t.maxLen||6,this.left=0,this.maxLeft=0,this.perwidth=t.perwidth||86,this.init=function(){return this.len=$(this.item).length,this.maxLeft=this.len-this.maxLen,this.len>this.maxLen?(this.rBtn.removeClass("dis"),void this.bindEvents()):void this.lBtn.addClass("dis")},this.bindEvents=function(){var t=this;$(this.lBtn).on("click",function(){t.toLeft()}),$(this.rBtn).on("click",function(){t.toRight()})},this.move=function(){this.scrollWrap.animate({"margin-left":"-"+this.left*this.perwidth+"px"},200)},this.toRight=function(){var t=this.len-this.left-this.maxLen;t>this.maxLen?(this.left+=this.maxLen,$(this.lBtn).removeClass("dis")):t>0?(this.left+=t,$(this.rBtn).addClass("dis"),$(this.lBtn).removeClass("dis")):$(this.rBtn).addClass("dis"),this.move()},this.toLeft=function(){this.left>this.maxLen?(this.left-=this.maxLen,$(this.rBtn).removeClass("dis")):this.left>0?(this.left=0,$(this.rBtn).removeClass("dis"),$(this.lBtn).addClass("dis")):$(this.lBtn).addClass("dis"),this.move()}}$(".js-buy-package").on("click",function(){if(!OP_CONFIG.isLogin)return void $("#js-signin-btn").trigger("click");if(!$(this).hasClass("ungo-confirm")){var t=$(this).attr("data-cid");window.location.href="//order.imooc.com/pay/confirm/goods_ids/6-"+t}});var i=function(t){var i=t,e=i.find(".js-combine-scroll"),n=i.find(".js-combine-box"),s=e.find(".course-item"),o=i.find(".package-scroll-bar"),a=o.find("span");if(e.width(s.outerWidth(!0)*s.length),e.outerWidth(!0)<n.width())return void o.hide();o.show();var h,r=!1;a.on("mousedown",function(t){return r=!0,h=t.clientX-this.offsetLeft,document.onmousemove=function(t){if(r){var t=t||window.event,i=t.clientX-h;return c(i),!1}},document.onmouseup=function(t){r=!1,t.cancelBubble=!0,document.onmousemove=document.onmouseup=null},!1});var c=function(t){0>=t?t=0:t>=o.outerWidth()-a.outerWidth()&&(t=o.outerWidth()-a.outerWidth());var i=t/(o.outerWidth()-a.outerWidth()),n="-"+(e.outerWidth()-396)*i+"px";a.css("left",t),e.css("margin-left",n)}};window.newPackageCombineScroll=function(i){if(i.hasClass("inited"))return!1;i.addClass("inited");var e=i,n=e.find(".js-combine-scroll"),s=n.find(".course-item"),o=e.find(".js-left-btn"),a=e.find(".js-right-btn");n.width(s.outerWidth(!0)*s.length);var h=new t({scrollWrap:n,item:s,lBtn:o,rBtn:a,maxLen:3,perwidth:s.outerWidth(!0)});h.init()};var e=function(){$(".package-item.js-package-combine")[0]&&$(".package-item.js-package-combine").each(function(){i($(this))}),$(".new-package-item.js-package-combine")[0]&&$(".new-package-item.js-package-combine").each(function(){var t=this;$(t).hasClass("tab")||newPackageCombineScroll($(t))})};setTimeout(function(){e()},1500)});